<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <!-- stylesheet -->
    <link rel="stylesheet" href="services.css" />

    <!-- bootstrap -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    />
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

    <!-- font-awesome -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />

    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>

    <title>Prince Georges Farmers Markets</title>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg fixed-top">
      <div class="container">
        <a class="navbar-brand" href="#">Prince Georges Farmers Markets</a>
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarResponsive"
          aria-controls="navbarResponsive"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class=" navbar-nav ml-auto">
            <li class="nav-item active">
              <a class="nav-link" href="index.html"
                >Home
                <span class="sr-only">(current)</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="about.html">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="services.html">View Map</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="help.html">Help</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Jumbotron -->
    <div class="card card-image">
      <div class="text-center rgba-stylish-strong py-5 px-4">
        <div class="intro py-5">
          <!-- Content -->
          <h1 class="h1 orange-text">
            Find the best market
          </h1>
          <h3 class="card-title h3 my-4 py-2">
            Click on different pins to find out more about the location.
          </h3>
          
        </div>
      </div>
    </div>
    <!-- Jumbotron -->

    <div class="container">
      <table class="table table-hover table-dark" style="width:60%">
          <thead>
              <tr>
                  <th scope="col">Name</th>
                  <th scope="col">Website</th>
              </tr>
            </thead>
            <tbody class = 'temp'>
            </tbody>
      </table>
    
    <div class="gmap_canvas">
        <iframe width="800" height="1700" id="gmap_canvas" src="https://www.google.com/maps/d/u/0/embed?mid=1ztngLn5ZqP24hZH5Uy9pPo3YSxVXK6vq" 
        frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe>
    </div>
    </div>

    <script>
        fetch('https://data.princegeorgescountymd.gov/resource/sphi-rwax.json')
        .then(res => res.json())
        .then(res => res.map(c => c.market_name + "split" + c.website))
        .then(data => {
          const a = data.map((item) => {
            return item;
          })
          console.log(a);
          var final_text = "";
          for (var i = 0; i < data.length; i++) {
            var split_array = a[i].split("split");
            if(split_array[1] == ("undefined")){
              split_array[1] = "Not Avaliable";
            } 
            final_text += "<tr><td>" + split_array[0] + "</td><td>" + split_array[1] + "</td></tr>";
          }
          const element = document.querySelector('.temp');
          element.innerHTML = final_text;
          return data;
          })
        .then(data => console.log(data))
 
            
  </script>
  </body>
</html>
